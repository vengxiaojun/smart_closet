<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
  <meta name="theme-color" content="#673ab7">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <title>响应式测试 - 智能衣橱</title>
  {% load static %}
  <link rel="stylesheet" href="{% static 'closet_app/responsive.css' %}">
  <script src="{% static 'closet_app/device-adapter.js' %}"></script>
  <style>
    /* 测试页面样式 */
    .test-container {
      padding: 20px;
      max-width: 1200px;
      margin: 0 auto;
    }
    
    .device-info {
      background: #f5f5f5;
      padding: 15px;
      border-radius: 8px;
      margin-bottom: 20px;
      font-family: monospace;
    }
    
    .device-info h3 {
      margin: 0 0 10px 0;
      color: #333;
    }
    
    .device-info p {
      margin: 5px 0;
      font-size: 14px;
    }
    
    .test-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
      margin-top: 20px;
    }
    
    .test-frame {
      border: 2px solid #ddd;
      border-radius: 8px;
      overflow: hidden;
      background: #fff;
    }
    
    .test-frame h4 {
      background: #673ab7;
      color: white;
      margin: 0;
      padding: 10px;
      text-align: center;
    }
    
    .test-frame iframe {
      width: 100%;
      height: 600px;
      border: none;
    }
    
    .responsive-buttons {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
      flex-wrap: wrap;
    }
    
    .responsive-btn {
      padding: 8px 16px;
      border: 1px solid #673ab7;
      background: white;
      color: #673ab7;
      border-radius: 4px;
      cursor: pointer;
      transition: all 0.3s;
    }
    
    .responsive-btn:hover {
      background: #673ab7;
      color: white;
    }
    
    .responsive-btn.active {
      background: #673ab7;
      color: white;
    }
    
    @media (max-width: 768px) {
      .test-container {
        padding: 10px;
      }
      
      .test-grid {
        grid-template-columns: 1fr;
      }
      
      .responsive-buttons {
        justify-content: center;
      }
    }
  </style>
</head>
<body>
  <div class="test-container">
    <h1>响应式设计测试页面</h1>
    
    <div class="device-info">
      <h3>设备信息</h3>
      <p id="device-details">正在检测设备信息...</p>
    </div>
    
    <div class="responsive-buttons">
      <button class="responsive-btn" onclick="testDevice('mobile')">手机模式</button>
      <button class="responsive-btn" onclick="testDevice('tablet')">平板模式</button>
      <button class="responsive-btn" onclick="testDevice('desktop')">桌面模式</button>
      <button class="responsive-btn" onclick="testDevice('landscape')">横屏模式</button>
    </div>
    
    <div class="test-grid">
      <div class="test-frame">
        <h4>首页 (home.html)</h4>
        <iframe src="{% url 'home' %}" title="首页测试"></iframe>
      </div>
      
      <div class="test-frame">
        <h4>衣柜页面 (closet.html)</h4>
        <iframe src="{% url 'closet_function' %}" title="衣柜页面测试"></iframe>
      </div>
      
      <div class="test-frame">
        <h4>搭配魔镜 (mirror.html)</h4>
        <iframe src="{% url 'mirror_function' %}" title="搭配魔镜测试"></iframe>
      </div>
      
      <div class="test-frame">
        <h4>个人中心 (profile.html)</h4>
        <iframe src="{% url 'profile_function' %}" title="个人中心测试"></iframe>
      </div>
      
      <div class="test-frame">
        <h4>场景搭配 (matching.html)</h4>
        <iframe src="{% url 'match_function' %}" title="场景搭配测试"></iframe>
      </div>
    </div>
  </div>

  <script>
    // 显示设备信息
    function updateDeviceInfo() {
      const deviceInfo = window.deviceAdapter ? window.deviceAdapter.deviceInfo : {};
      const details = document.getElementById('device-details');
      
      if (deviceInfo) {
        details.innerHTML = `
          <p><strong>屏幕尺寸:</strong> ${deviceInfo.screenWidth} x ${deviceInfo.screenHeight}</p>
          <p><strong>设备类型:</strong> ${deviceInfo.isMobile ? '移动设备' : deviceInfo.isTablet ? '平板设备' : '桌面设备'}</p>
          <p><strong>操作系统:</strong> ${deviceInfo.isIOS ? 'iOS' : deviceInfo.isAndroid ? 'Android' : '其他'}</p>
          <p><strong>像素密度:</strong> ${deviceInfo.pixelRatio}x</p>
          <p><strong>方向:</strong> ${deviceInfo.isLandscape ? '横屏' : '竖屏'}</p>
          <p><strong>触摸支持:</strong> ${window.deviceAdapter && window.deviceAdapter.isTouchSupported() ? '是' : '否'}</p>
        `;
      } else {
        details.innerHTML = '<p>设备适配器未加载</p>';
      }
    }
    
    // 测试不同设备模式
    function testDevice(mode) {
      const buttons = document.querySelectorAll('.responsive-btn');
      buttons.forEach(btn => btn.classList.remove('active'));
      event.target.classList.add('active');
      
      // 这里可以添加模拟不同设备尺寸的代码
      console.log(`测试模式: ${mode}`);
    }
    
    // 页面加载完成后更新设备信息
    document.addEventListener('DOMContentLoaded', () => {
      setTimeout(updateDeviceInfo, 1000);
      
      // 监听窗口大小变化
      window.addEventListener('resize', updateDeviceInfo);
    });
    
    // 定期更新设备信息
    setInterval(updateDeviceInfo, 5000);
  </script>
</body>
</html> 